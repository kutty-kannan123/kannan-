
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interview Task</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="js/script.js">
    <link rel="stylesheet" href="css/style.css">
    
</head>

<body>
    <section class="range-screen">
        <div class="container">
            <div class="field">
                <!-- Left Drawer (Dr Grow) -->
                <div class="drawer" id="drGrowDrawer">
                    <div class="drawer-header" onclick="toggleDrawer('drGrowDrawer')">
                        <h6>Dr Grow</h6>
                        <i class="drawer-icon fas fa-chevron-down"></i>
                    </div>
                    <div class="drawer-content">
                        <input type="number" id="inputValue1" placeholder="Enter Amount" />
                    </div>
                </div>
    
                <!-- Right Drawer (Others) -->
                <div class="drawer" id="othersDrawer">
                    <div class="drawer-header" onclick="toggleDrawer('othersDrawer')">
                        <h6>Others</h6>
                        <i class="drawer-icon fas fa-chevron-down"></i>
                    </div>
                    <div class="drawer-content">
                        <input type="number" id="inputValue2" placeholder="Enter Amount" />
                    </div>
                </div>
    
                <div class="button">
                    <button onclick="updateValue()">Update</button>
                </div>
            </div>
        </div>
    </section>
    

    <main class="main-screen">
        <div class="container">
            <div class="scheme-wrapper">
                <div class="wrapper-details">
                    <h2>Scheme</h2>
                    <p>Win gift vouchers by buying eligible products. Know more here.</p>
                </div>
                <div class="period-date-range">
                    <h4>Jan 2024 - Mar 2024</h4>
                </div>
            </div>
            <div class="bottom">
                <div class="bottom-a">
                    <div class="reward">
                        <div class="rewards active">
                            <h4>Bronze</h4>
                            <h6>Gift Voucher 10,000</h6>
                            <div class="line-indicator"></div>
                        </div>
                        <div class="rewards">
                            <h4>Silver</h4>
                            <h6>Gift Voucher 25,000</h6>
                            <div class="line-indicator"></div>
                        </div>
                        <div class="rewards">
                            <h4>Gold</h4>
                            <h6>Gift Voucher 60,000</h6>
                            <div class="line-indicator"></div>
                        </div>
                    </div>

                    <div class="prod-summary active">
                        <div class="product-detail">
                            <div class="prod-detail-1">
                                <i class="fas fa-check"></i>
                                <h6>Total Value</h6>
                            </div>
                            <div class="prod-detail-2">
                                <h6 class="total-Value">0.00/ ₹1,50,000.00</h6>
                            </div>
                        </div>
                        <div class="product-detail">
                            <div class="prod-detail-1">
                                <i class="fas fa-check"></i>
                                <h6>Dr Grow</h6>
                            </div>
                            <div class="prod-detail-2">
                                <h6 id="currentValue2Display">0.00/ ₹30,000.00</h6>
                            </div>
                        </div> 

                        <div class="product-detail">
                            <div class="prod-detail-1">
                                <i class="fas fa-check"></i>
                                <h6>Others</h6>
                            </div>
                            <div class="prod-detail-2">
                                <h6 id="currentValue3Display">0.00/ ₹1,20,000.00</h6>
                            </div>
                        </div>
                    </div>

                    <div class="prod-summary">
                        <div class="product-detail">
                            <div class="prod-detail-1">
                                <i class="fas fa-check"></i>
                                <h6>Total Value</h6>
                            </div>
                            <div class="prod-detail-2">
                                <h6 class="total-Value">0.00/ ₹3,00,000.00</h6>
                            </div>
                        </div>
                        <div class="product-detail">
                            <div class="prod-detail-1">
                                <i class="fas fa-check"></i>
                                <h6>Dr Grow</h6>
                            </div>
                            <div class="prod-detail-2">
                                <h6 id="currentValue2Display">0.00/ ₹60,000.00</h6>
                            </div>
                        </div>
                        <div class="product-detail">
                            <div class="prod-detail-1">
                                <i class="fas fa-check"></i>
                                <h6>Others</h6>
                            </div>
                            <div class="prod-detail-2">
                                <h6 id="currentValue3Display">0.00/ ₹2,40,000.00</h6>
                            </div>
                        </div>
                    </div>

                    <div class="prod-summary">
                        <div class="product-detail">
                            <div class="prod-detail-1">
                                <i class="fas fa-check"></i>
                                <h6>Total Value</h6>
                            </div>
                            <div class="prod-detail-2">
                                <h6 class="total-Value">0.00/ ₹5,00,000.00</h6>
                            </div>
                        </div>
                        <div class="product-detail">
                            <div class="prod-detail-1">
                                <i class="fas fa-check"></i>
                                <h6>Dr Grow</h6>
                            </div>
                            <div class="prod-detail-2">
                                <h6 id="currentValue2Display">0.00/ ₹90,000.00</h6>
                            </div>
                        </div>
                        <div class="product-detail">
                            <div class="prod-detail-1">
                                <i class="fas fa-check"></i>
                                <h6>Others</h6>
                            </div>
                            <div class="prod-detail-2">
                                <h6 id="currentValue3Display">0.00/ ₹4,10,000.00</h6>
                            </div>
                        </div>
                    </div>
                    <div class="product-precentage1 active">
                        <div class="product-precentage2">
                        </div>
                    </div>
                    <div class="product-precentage1">
                        <div class="product-precentage2">
                        </div>
                    </div>
                    <div class="product-precentage1">
                        <div class="product-precentage2">
                        </div>
                    </div>

                    <div class="eligble">
                        <div class="eli-r">
                            <a href="https://www.figma.com/design/ej1ZsZS3Pny2AEP4z60Dk1/Scheme_card?node-id=0-1&node-type=canvas&t=LIGeAd8QCc7m9yLu-0" target="_blank">Eligible Purchases</a>
                        </div>
                        <div class="eli-l">
                            <h4 class="amount active">₹1,50,000.00</h4>
                            <h4 class="amount">₹3,00,000.00</h4>
                            <h4 class="amount">₹5,00,000.00</h4>
                        </div>
                    </div>

                </div>

                <div class="bottom-b">
                    <div class="bottom-top">
                        <h2>Your Rewards</h2>
                        <p id="content-1" class="content-1 visible">You are yet to start winning</p>
                        <p id="content-2" class="content-2 visible">Talk to your AquaConnect Officer to know more about the scheme if you have any questions</p>
                    </div>
                    <div class="bottom-bb">
                        <div class="profile-img">
                            <img src="img/man.jpg" alt="avatar">
                        </div>
                        <div class="profile-detail">
                            <h6 class="name">Sathyan Velumani</h6>
                            <h6 class="contact">6985746352</h6>
                        </div>
                    </div>
                    <div class="bottom-top reward-contenet">
                        <p id="reward-content" class="hidden content-2">Talk to your AquaConnect Officer to more about the scheme if you have any questions</p>
                    </div>
                    <div class="rewardsbtn">
                        <button class="bronze">
                            <h4>₹10,000</h4>
                        </button>
                        <button class="Silvar">
                            <h4>₹25,000</h4>
                        </button>
                        <button class="gold">
                            <h4>₹60,000</h4>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
        // Drawer Toggle Function
    function toggleDrawer(drawerId) {
        const drawer = document.getElementById(drawerId);
        const isActive = drawer.classList.contains('active');
        
      
        document.querySelectorAll('.drawer').forEach(d => {
            d.classList.remove('active');
        });
    
        // If the clicked drawer wasn't active, open it
        if (!isActive) {
            drawer.classList.add('active');
        }
    }
    
    // Main Update Function
    function updateValue() {
        // Get input values
        const inputValue1 = parseFloat(document.getElementById('inputValue1').value) || 0;
        const inputValue2 = parseFloat(document.getElementById('inputValue2').value) || 0;
    
        // Calculate the total value
        const totalValue = inputValue1 + inputValue2;
    
        // Find and update active product summary
        findActive(totalValue);
    
        // Update the active product summary displays
        const activeProdSummary = document.querySelector('.prod-summary.active');
        if (activeProdSummary) {
            // Update total value display
            const totalValueDisplay = activeProdSummary.querySelector('.total-Value');
            if (totalValueDisplay) {
    totalValueDisplay.textContent = `${totalValue.toFixed(2)}/ ₹${totalValueGoal(totalValue)}.00`;
}
    
            // Update individual value displays
            const productDetails = activeProdSummary.querySelectorAll('.prod-detail-2 h6');
            if (productDetails.length >= 3) {
                const maxDrGrowValue = extractValue(productDetails[1].textContent);
                const maxOthersValue = extractValue(productDetails[2].textContent);
    
                productDetails[1].textContent = `${inputValue1.toFixed(2)}/ ₹${maxDrGrowValue.toLocaleString()}.00`;
                productDetails[2].textContent = `${inputValue2.toFixed(2)}/ ₹${maxOthersValue.toLocaleString()}.00`;
            }
    
            // Update icon colors
            changeIconColor(inputValue1, inputValue2);
        }
    
        // Update all other displays
        updateRewards(totalValue);
        updatePercentage(totalValue);
        updateRewardPrize(totalValue);
        updateDisplay(totalValue);
    }
    
    // Helper Functions
    function findActive(totalValue) {
        const prodSummaries = document.querySelectorAll('.prod-summary');
        prodSummaries.forEach(summary => summary.classList.remove('active'));
    
        if (totalValue <= 150000) {
            prodSummaries[0]?.classList.add('active');
        } else if (totalValue <= 300000) {
            prodSummaries[1]?.classList.add('active');
        } else if (totalValue <= 500000) {
            prodSummaries[2]?.classList.add('active');
        }
    }
    
    function extractValue(text) {
        return parseFloat(text.split('/ ')[1].replace(/₹|,/g, '').trim());
    }
    
    function changeIconColor(inputValue1, inputValue2) {
        const activeProdSummary = document.querySelector('.prod-summary.active');
        const icons = activeProdSummary.querySelectorAll('.prod-detail-1 i');
    
        const [currentTotal, currentValue1, currentValue2] = [
            extractValue(activeProdSummary.querySelector('.total-Value').textContent),
            extractValue(activeProdSummary.querySelector('#currentValue2Display').textContent),
            extractValue(activeProdSummary.querySelector('#currentValue3Display').textContent)
        ];
    
        const addition = inputValue1 + inputValue2;
        const isMatch = (current, expected) => (current === expected) ? 'blue' : '#6366F133';
    
        icons[0].style.color = isMatch(currentTotal, addition);
        icons[1].style.color = isMatch(currentValue1, inputValue1);
        icons[2].style.color = isMatch(currentValue2, inputValue2);
    }
    
    function totalValueGoal(totalValue) {
        return totalValue <= 150000 ? 150000 :
               totalValue <= 300000 ? 300000 :
               totalValue <= 500000 ? 500000 : 0;
    }
    
    // Reward and Display Update Functions
    function updateRewards(totalValue) {
        const elements = {
            rewards: document.querySelectorAll('.rewards'),
            prodSummaries: document.querySelectorAll('.prod-summary'),
            eligibleAmount: document.querySelectorAll('.amount'),
            Precentageapp: document.querySelectorAll('.product-precentage1')
        };
    
        // Remove active class from all elements
        Object.values(elements).forEach(elementGroup => {
            elementGroup.forEach(element => element.classList.remove('active'));
        });
    
        // Add active class based on total value
        let activeIndex = 0;
        if (totalValue <= 150000) activeIndex = 0;
        else if (totalValue <= 300000) activeIndex = 1;
        else if (totalValue <= 500000) activeIndex = 2;
    
        // Apply active class to corresponding elements
        Object.values(elements).forEach(elementGroup => {
            elementGroup[activeIndex]?.classList.add('active');
        });
    }
    
    function updatePercentage(totalValue) {
        const goal = totalValueGoal(totalValue);
        const percentage = Math.min((totalValue / goal) * 100, 100);
        const percentageElement = document.querySelector('.product-precentage1.active .product-precentage2');
        if (percentageElement) {
            percentageElement.style.width = `${percentage}%;`
        }
    }
    
    function updateRewardPrize(totalValue) {
        const rewardButtons = document.querySelectorAll('.rewardsbtn button');
        const profileDetail = document.querySelector('.bottom-bb');
    
        // Hide all buttons initially
        rewardButtons.forEach(button => button.style.display = 'none');
        if (profileDetail) profileDetail.style.display = 'none';
    
        // Show buttons based on total value
        if (totalValue >= 150000) rewardButtons[0].style.display = 'inline-block'; // Bronze
        if (totalValue >= 300000) rewardButtons[1].style.display = 'inline-block'; // Silver
        if (totalValue === 500000) rewardButtons[2].style.display = 'inline-block'; // Gold
    }
    
    function updateDisplay(totalValue) {
        const elements = {
            content1: document.getElementById('content-1'),
            content2: document.getElementById('content-2'),
            rewardContent: document.getElementById('reward-content')
        };
    
        const isRewardsVisible = totalValue >= 150000;
    
        elements.content1.classList.toggle('visible', !isRewardsVisible);
        elements.content1.classList.toggle('hidden', isRewardsVisible);
        
        elements.content2.classList.toggle('visible', !isRewardsVisible);
        elements.content2.classList.toggle('hidden', isRewardsVisible);
        
        elements.rewardContent.classList.toggle('hidden', !isRewardsVisible);
        elements.rewardContent.classList.toggle('visible', isRewardsVisible);
    }
    
    // Reward Selection Functions
    function selectReward() {
        const rewards = document.querySelectorAll('.rewards');
        rewards.forEach(reward => reward.classList.remove('active'));
        this.classList.add('active');
    
        const index = Array.from(rewards).indexOf(this);
        const elements = {
            prodSummaries: document.querySelectorAll('.prod-summary'),
            eligibleAmount: document.querySelectorAll('.amount'),
            Precentageapp: document.querySelectorAll('.product-precentage1')
        };
    
        Object.values(elements).forEach(elementGroup => {
            elementGroup.forEach((element, idx) => {
                element.classList.toggle('active', idx === index);
            });
        });
    }
    
    function handleKeyDown(event) {
        if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault();
            selectReward.call(this);
        }
    }
    
    // Initialize Event Listeners
    document.addEventListener('DOMContentLoaded', function() {
        // Add click event to update button
        const updateButton = document.querySelector('button');
        if (updateButton) {
            updateButton.addEventListener('click', updateValue);
        }
    
        // Add events to reward elements
        const rewards = document.querySelectorAll('.rewards');
        rewards.forEach(reward => {
            reward.addEventListener('click', selectReward);
            reward.addEventListener('keydown', handleKeyDown);
        });
    
        // Add change events to inputs
        const inputs = document.querySelectorAll('input[type="number"]');
        inputs.forEach(input => {
            input.addEventListener('change', updateValue);
        });
    });
    
    </script>

   
</body>

</html>